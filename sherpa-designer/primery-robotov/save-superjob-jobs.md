# Save SuperJob Jobs

Рассмотрим пример робота, который автоматически сохраняет отклики на созданную вакансию на сайте SuperJob. Для правильной работы необходимо заранее войти в личный кабинет на сайте через браузер “Google Chrome”.

Проект робота состоит из одной диаграммы.&#x20;

Диаграмма проекта выглядит так (для удобства блоки диаграммы пронумерованы):

<figure><img src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXfK_hzEpmRiy1wOMJ3OXyyN1NWEDEN-bM6CXe4a5_jx3ZHqPTw4UfYCrjOxtw6Ei9no2WkEE2LUnI1Nb6qthd1KruyHQtuoJBQrvJwteNIA8dznspavPDkMnYaOszjfllguQixwJw?key=FxLA9F3yW7bqYX87nSO7VZ4G" alt=""><figcaption></figcaption></figure>

<br>

<figure><img src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXfIR--E71HTQ2w7h1YnThKGJC6alvyeLUS2axzEchq2DvwWcExJz3ALfMShIR813Pwum3mIFaolquuy8_G3SDi_3HN7Hf1ybkB8yoc5xO8cjGUVFCrkfDto-sP9O4qB8FWaXGP4Bw?key=FxLA9F3yW7bqYX87nSO7VZ4G" alt=""><figcaption></figcaption></figure>

<br>

1. **Блок “Старт”** (с этого блока начинается любая диаграмма).
2. **Блок “Запустить Chrome”** позволяет запустить браузер Google Chrome. Для данного блока указаны следующие свойства:

* URL (адрес открываемой при запуске страницы, указанный с помощью переменной);
* Время ожидания (время ожидания запуска приложения и загрузки вкладки в секундах).

<figure><img src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXfEPsUf2DLganLwL3XU3fzmacRJPHRscMnh8Sja5J-EkvQeQy2oj0icjekLXTH5gLkVM01J7H2DprCqPKygywRmFDiB-zMHQ4r4483q-ZtG1q6TDeQChSvixeQIrkLBdHZITZbP?key=FxLA9F3yW7bqYX87nSO7VZ4G" alt=""><figcaption></figcaption></figure>

3. **Блок “Получить текст”** позволяет получить текст или значение атрибута заданного элемента веб-страницы (заголовка, ссылки, поля редактирования, текстового блока и т.д.). Данный блок записан с помощью инструмента “[Запись](../rabota-v-sherpa-designer/osnovnoe-menyu/panel-razrabotka/menyu-zapis/zapis-deistvii-polzovatelya/)”. Для него указаны следующие свойства:

* Селектор (идентификатор окна браузера и элемента веб-страницы);
* Тип значения (выбор типа извлекаемого значения);
* Автоскроллинг (при установленном флаге будет произведен автоматический скроллинг до элемента);
* ID процесса (переменная, в которой хранится идентификатор процесса и вкладки браузера, используемые данным блоком. Если свойство оставить пустым, либо если переменная "ID процесса" не была ранее присвоена в момент открытия браузера, приложение и вкладка браузера будут определены из содержимого соответствующей строки селектора.);
* Задержка перед (задержка в секундах перед выполнением блока);
* Задержка после (Задержка в секундах после выполения блока);
* Время ожидания (предельное время ожидания заданного элемента в секундах).

<figure><img src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXdGVvy6JnNrEvWzush1xuxL6ZnN_oRqwMN5KABaiS5Hnngb5TrkAMDgAUJkYXcqJeDU6WmobUcWXSuSUYfh89Y4fk5NpKcZV6X-QCF1faGDcymCIFp1Vle9hLy95yHaCVP5P2sg3Q?key=FxLA9F3yW7bqYX87nSO7VZ4G" alt=""><figcaption></figcaption></figure>

4. **Блок “Условие”** проверяет указанное условие на истинность, после чего выполнение сценария продолжается в сторону выхода “Да” (если условие выполняется) или в сторону выхода “Нет” (если условие не выполнилось).&#x20;

Условие записывается в формате: “переменная” равна (==)/ больше (>)/ меньше (<) “значение”.&#x20;

Например: $a == “Привет”, то есть, если значение переменной $a равно “Привет”, то выход “Да”, в противном случае – выход “Нет”.

$Result > 5, то есть, если значение переменной $Result меньше 5, то выход “Да”, в противном случае – выход “Нет”.

В данном случае, в качестве условия установлено: $Result != "Вход". Т. е., переменная не равна “Вход”.

<figure><img src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXdV2DsTUGFcMTi8BZAkG63LY_WSUgSVLyV3VqtkqN6awkG_Oq8zR6GFidBJ-N2ZRTLm-Xt5QQkf8_Dd_1jsSiMAdjmseXwRGKqPkkNg5uZwyCzrA4EAz-ki8AgzMBdvpIy9NuI3dg?key=FxLA9F3yW7bqYX87nSO7VZ4G" alt=""><figcaption></figcaption></figure>

5. **Блок “Лог”** позволяет выводить в лог произвольные сообщения и/или значения переменных в процессе работы сценария робота. Для данного блока указано свойство “Значение”. В кавычках указана текстовая константа, а имя переменной начинается с символа $. Т.е., данный блок записывает в лог робота сообщение “Нажимаем отклики” и отображает его в статусе.

<figure><img src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXeuYCSWrKjo-1qCdfzexw-r3md7csh0jHNuYemMtFD9k-9cu7TpqPVomNaRGeNcejwXN7B6VCRNUCillqfyW1A7DG6PIWsU_BRhBVRS_SKdiTK36gljhwJSDeSdPaHoJNnf2Lue?key=FxLA9F3yW7bqYX87nSO7VZ4G" alt=""><figcaption></figcaption></figure>

6. и 7. **Блоки “Клик мышкой”** производит клик по заданному элементу приложения.

8\. **Блок “Посчитать элементы”** позволяет получить количество однотипных элементов на веб-странице по заданному селектору.  Данный блок записан с помощью инструмента “Запись”. Для него указаны следующие свойства:

* Селектор (идентификатор окна браузера и элемента веб-страницы, общий для всех искомых однотипных элементов);
* ID процесса (переменная, в которой хранится идентификатор процесса и вкладки браузера, используемые данным блоком);
* Таймаут (предельное время подсчета элементов в секундах).

<figure><img src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXf01e97QbqjNTifgfq_FZdlWYaQcQvvttDHOKukp5Fsz8KK2HWp9Kn83NEI930u1G_UmVjQOy9Ln6nhWeLuWIVo_Uv3NZMw69XrxZX-_iilllBBm9RMAEuiaX43KkjErRNTYh7fNA?key=FxLA9F3yW7bqYX87nSO7VZ4G" alt=""><figcaption></figcaption></figure>

9\. **Блок “Цикл”** позволяет повторить цепочку действий (блоков) несколько раз и при этом посчитать количество итераций цикла, записывая текущее количество в специальную переменную (указанную в свойстве “Цикл”), которую можно затем использовать в других блоках. При первом входе в блок значение переменной из свойства “Цикл” приравнивается к “Начальному значению” (в данном случае оно равно 0), а затем выполнение сценария продолжается в сторону выхода “Цикл” данного блока (в, так называемое, “тело цикла”). Как только выполнение сценария вновь дойдет до данного блока, значение переменной “Цикл” увеличится на значение “Шаг” (в данном случае, он равен 1), и вновь произойдет переход в сторону выхода «Цикл». Как только значение переменной “Цикл” станет больше или равно “Конечному значению” (в данном случае, оно задано переменной $CountItem), выполнение сценария продолжится в сторону нижнего выхода блока. Не забудьте соединить выход последнего блока в теле цикла со входом данного блока или какого-либо из предшествующих блоков.&#x20;

<figure><img src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXeQ9xm7fmPCW02z7Qy31SFVYwxN4tCjuMEpm_4cNVOl5tv13LPN8VgxJSnoclWWDeAe0FUGHPaFilm2MAEnL1g-GwGk2FTjIBSrRI-QNxcwYmG19WlLqPHpc0XYnajEeguF6KexBg?key=FxLA9F3yW7bqYX87nSO7VZ4G" alt=""><figcaption></figcaption></figure>

Блоки 10. - 13. записаны с помощью инструмента “Запись”.

14\. Блок **“Закрыть вкладку браузера”** позволяет закрыть заданную вкладку указанного браузера. Для данного блока указан ID процесса (переменная, в которой хранится идентификатор процесса и вкладки браузера, используемые данным блоком).

<figure><img src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXdzjoIA64wrTYj_1ryBX5BOhEnig8zhclSQ5MV9V5UBg1p4gMn8A4O1S_CXaOnA7S7IXhiTz6NzSczKlPVJ14cikaw3tfklB_rhgNfAvnS1Mx-oszaLbzbbAfFnxxX_IkvglGfZYQ?key=FxLA9F3yW7bqYX87nSO7VZ4G" alt=""><figcaption></figcaption></figure>

15\. **Блок “Лог”** позволяет выводить в лог произвольные сообщения и/или значения переменных в процессе работы сценария робота. Для данного блока указано свойство “Значение”. В кавычках указана текстовая константа, а имя переменной начинается с символа $. Т.е., данный блок записывает в лог сообщение “Ошибка авторизации”.

<figure><img src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXd55HUl-vrPVUecbK3MqXmPZp-jcV9QhxPk1PgNg3TcoHGaOL1a6c-k7O7_Wd_CEKSaS3wXWyUNAo71OpJsyyumfMF7DORkjKie2M7K5ok0OYhRArb5_QsFqqH3SjyC6CngT0SC3A?key=FxLA9F3yW7bqYX87nSO7VZ4G" alt=""><figcaption></figcaption></figure>

16\. **Блок “Очистить кэш селекторов”** позволяет очистить внутренний кэш селекторов. При использовании селекторов для ускорения поиска элементов на странице используется внутренний кэш. В кэш заносится информация об элементе после его успешного определения, и в дальнейшем при поиске элемента сначала проверяется кэш. Если в кэше присутствует информация по данному селектору, то она извлекается из него, что существенно ускоряет работу робота. Однако, в некоторых случаях, данный кэш может негативно сказываться на работе сценария. Часто это наблюдается при циклической обработке каких либо однотипных элементов на одной странице, например результатов поиска. В таких случаях рекомендуем очищать кэш при запуске каждой итерации перебора однотипных элементов на странице.

Блоки 17. - 21. записаны с помощью инструмента “Запись”. Данные блоки содержат серию эмуляции кликов мышкой и нажатий клавиш клавиатуры.

22\. **Блок “Условие”** проверяет указанное условие на истинность, после чего выполнение сценария продолжается в сторону выхода “Да” (если условие выполняется) или в сторону выхода “Нет” (если условие не выполнилось).&#x20;

Условие записывается в формате: “переменная” равна (==)/ больше (>)/ меньше (<) “значение”.&#x20;

Например: $a == “Привет”, то есть, если значение переменной $a равно “Привет”, то выход “Да”, в противном случае – выход “Нет”.

$Result > 5, то есть, если значение переменной $Result меньше 5, то выход “Да”, в противном случае – выход “Нет”.

В данном случае, в качестве условия установлено: $Result. Т. е., если указана просто переменная, то она проверяется на $true или $false.

<figure><img src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXfQ-i1YDcxwYpLrgzRqFG4EmpIzZk1WrraPm3s4WnjoGGmEPRGNEIXQ2RAqShS2X49dQxiJdXUQG7aq2RwC8ngyuUkTkNZOJhWVQygHZAwlJpnNBTdSPNRaHrG3L7riE9ATJUoV?key=FxLA9F3yW7bqYX87nSO7VZ4G" alt=""><figcaption></figcaption></figure>

23\. **Блок “Лог”** позволяет выводить в лог произвольные сообщения и/или значения переменных в процессе работы сценария робота. Для данного блока указано свойство “Значение”. В кавычках указана текстовая константа, а имя переменной начинается с символа $. Т.е., данный блок записывает в лог робота сообщение “Авторизация” и отображает его в статусе.

<figure><img src="https://lh7-rt.googleusercontent.com/docsz/AD_4nXc5CCnP2IopfotGUA8Z36YnPpVnCO2Wj-3Gnvv-8T-woH8shZs29LLR8u0K-WAT4B_Ov3MIwa_9gz3Rfqm7i6GN2RfOjtJF16pOk7DNlQwbismHx0hlvReyCul92SRIAIFFoGOt?key=FxLA9F3yW7bqYX87nSO7VZ4G" alt=""><figcaption></figcaption></figure>

24\. и 25. **Блок “Конец”** (этим блоком завершается работа сценария или возврат диаграммы подпроцесса в основной процесс).
