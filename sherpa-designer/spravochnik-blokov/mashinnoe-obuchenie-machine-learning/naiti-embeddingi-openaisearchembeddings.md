# Найти эмбеддинги (OpenAISearchEmbeddings)

Блок позволяет по заданному запросу-эмбеддингу[^1] найти в базе знаний, представляющей собой таблицу объектов и их эмбеддингов, самые похожие строки и возвратить индексы этих строк в виде списка, отсортированного по убыванию похожести.&#x20;

Эмбеддинги и для запроса, и для таблицы эмбеддингов, по которой осуществляется поиск, могут быть получены с помощью блока "Получить эмбеддинги". При первом использовании блока происходит построение базы данных векторов, и это может занимать длительное время. При последующих вызовах блока с одним и тем же "ID базы" будет использоваться уже созданная база данных векторов, и скорость работы блока возрастает многократно.

<table data-header-hidden><thead><tr><th width="283.36669921875" valign="top"></th><th width="317.98333740234375" valign="top"></th></tr></thead><tbody><tr><td valign="top">Эмбеддинг запроса</td><td valign="top">[Текст] Эмбеддинг, для которого необходимо найти похожие строки в таблице. Значение для данного поля может быть получено с помощью блока "Получить эмбеддинг".</td></tr><tr><td valign="top">База знаний</td><td valign="top">[Таблица Данных] Таблица, по которой будет осуществляться поиск. Одна из колонок таблицы должна содержать эмбеддинги, другие колонки таблицы могут содержать любые пользовательские данные.</td></tr><tr><td valign="top">ID базы</td><td valign="top"><p>[Текст] Можно указать другой ID базы, чтобы блок при первом запуске начал строить базу данных векторов заново. </p><p></p><p>При первом использовании блока происходит построение базы данных векторов и это может занимать длительное время. При последующих вызовах блока с одним и тем же "ID базы" будет использоваться уже созданная база данных векторов и скорость работы блока возрастает многократно.</p></td></tr><tr><td valign="top">Колонка эмбеддингов</td><td valign="top"><p>[Число/Текст] Индекс или название колонки из таблицы, указанной в свойстве "База знаний", в которой размещены эмбеддинги. </p><p>По умолчанию <code>1</code>.</p></td></tr><tr><td valign="top">Количество результатов</td><td valign="top"><p>[Число] Максимальное количество возвращаемых блоком строк-результатов из базы знаний. </p><p>По умолчанию <code>5</code>.</p></td></tr><tr><td valign="top">Индексы строк</td><td valign="top">[Список] Список индексов строк из Базы знаний, содержащих наиболее похожие на запрос эмбеддинги, отсортированный в порядке убывания похожести.</td></tr><tr><td valign="top">Похожесть</td><td valign="top">[Список] Числовые меры похожести для каждого из результатов.</td></tr><tr><td valign="top">Уровень обработки</td><td valign="top"><p>Выбор уровня обработки ошибок. Возможные значения: </p><ul><li>"Default" - по умолчанию; </li><li>"Ignore" - ошибки игнорируются; </li><li>"Handle" - ошибки обрабатываются. </li></ul><p>Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы.</p></td></tr><tr><td valign="top">Уровень сообщений</td><td valign="top"><p>Выбор уровня сообщений, который будут выводить блоки при работе. Возможные значения: </p><ul><li>"Default" - по умолчанию; </li><li>"Release" - вывод отключен; </li><li>"Debug" - вывод основной информации; </li><li>"Detailed" - вывод подробной информации. </li></ul><p>Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы.</p></td></tr><tr><td valign="top">Текст ошибки</td><td valign="top">[Текст] Возвращает подробную информацию об ошибке в случае некорректного выполнения работы блока.</td></tr></tbody></table>

[^1]: Эмбеддинг - это вектор (набор чисел), которые характеризуют смысл, ассоциированный с переданной входной текста. Слова или предложения с близким смыслом будут иметь эмбеддинги с минимальным косинусным расстоянием. Эмбеддинги в том числе могут использоваться для поиска наиболее близких по смыслу слов, строк или абзацев в базах данных документов.
