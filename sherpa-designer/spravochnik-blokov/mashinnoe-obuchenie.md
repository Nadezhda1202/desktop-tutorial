# Машинное обучение

### Обучение модели предсказания

Создаёт новую модель машинного обучения для предсказания значений, обучает её на основе входных данных и сохраняет итоговую модель в файл.

<table data-header-hidden><thead><tr><th width="257"></th><th></th></tr></thead><tbody><tr><td>Данные для обучения</td><td>[Текст] Путь к файлу CSV, содержащему данные для обучения. Файл должен обязательно содержать корректные заголовки. Файл должен быть в формате UTF8</td></tr><tr><td>Номер основной колонки</td><td>[Число] Номер колонки, содержащей предсказываемое значение. Нумерация начинается с нуля</td></tr><tr><td>Номера колонок данных</td><td>[Текст] Номера колонок, содержащих данные. Разделитель запятая. Нумерация начинается с нуля. Например: "1,3"</td></tr><tr><td>Номера строковых колонок</td><td>[Текст] Номера колонок, содержащих текстовые данные. Разделитель запятая. Если данное значение будет не заполнено, то тип колонки будет распознаваться автоматически. Нумерация начинается с нуля. Например: "1,3"</td></tr><tr><td>Разделитель</td><td>[Текст] Разделитель колонок CSV</td></tr><tr><td>Тип алгоритма</td><td>Выбор типа алгоритма</td></tr><tr><td>Путь к модели</td><td>[Текст] Путь сохранения файла модели</td></tr><tr><td>Уровень обработки</td><td>Выбор уровня обработки ошибок. Возможные значения: "Default" - по умолчанию; "Ignore" - ошибки игнорируются; "Handle" - ошибки обрабатываются. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы</td></tr><tr><td>Уровень сообщений</td><td>Выбор уровня сообщений, которые будут выводить блоки при работе. Возможные значения: "Default" - по умолчанию; "Release" - вывод отключен; "Debug" - вывод основной информации; "Detailed" - вывод подробной информации. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы</td></tr><tr><td>Текст ошибки</td><td>[Текст] Возвращает подробную информацию об ошибке в случае некорректного выполнения работы блока</td></tr></tbody></table>

### Предсказание

Предсказывает значение на основе обученной модели машинного обучения.

<table data-header-hidden><thead><tr><th width="253"></th><th></th></tr></thead><tbody><tr><td>Путь к модели</td><td>[Текст] Путь к файлу модели. Модель должна быть создана с помощью блока "Обучение модели предсказания"</td></tr><tr><td>Данные</td><td>[Таблица данных] Входные данные. Колонки у таблицы должны совпадать с колонками, на которых происходило обучение модели</td></tr><tr><td>Название целевой колонки</td><td>[Текст] Название колонки для записи результата. Если колонки нет в данных, поступающих на вход блока, то она будет добавлена. Например: "Score"</td></tr><tr><td>Результат</td><td>[Таблица данных] Результат предсказания</td></tr><tr><td>Уровень обработки</td><td>Выбор уровня обработки ошибок. Возможные значения: "Default" - по умолчанию; "Ignore" - ошибки игнорируются; "Handle" - ошибки обрабатываются. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы</td></tr><tr><td>Уровень сообщений</td><td>Выбор уровня сообщений, которые будут выводить блоки при работе. Возможные значения: "Default" - по умолчанию; "Release" - вывод отключен; "Debug" - вывод основной информации; "Detailed" - вывод подробной информации. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы</td></tr><tr><td>Текст ошибки</td><td>[Текст] Возвращает подробную информацию об ошибке в случае некорректного выполнения работы блока</td></tr></tbody></table>

### Обучение модели классификации

Создаёт новую модель машинного обучения для классификации, обучает её на основе входных данных и сохраняет итоговую модель в файл.

<table data-header-hidden><thead><tr><th width="246"></th><th></th></tr></thead><tbody><tr><td>Данные для обучения</td><td>[Текст] Путь к файлу CSV, содержащему данные для обучения. Файл должен обязательно содержать корректные заголовки. Файл должен быть в формате UTF8</td></tr><tr><td>Номер основной колонки</td><td>[Число] Номер колонки, содержащей класс. Нумерация начинается с нуля</td></tr><tr><td>Номера колонок данных</td><td>[Текст] Номера колонок, содержащих данные. Разделитель запятая. Нумерация начинается с нуля. Например: "1,3"</td></tr><tr><td>Номера строковых колонок</td><td>[Текст] Номера колонок, содержащих текстовые данные. Разделитель запятая. Если данное значение будет не заполнено, то тип колонки будет распознаваться автоматически. Нумерация начинается с нуля. Например: "1,3"</td></tr><tr><td>Разделитель</td><td>[Текст] Разделитель колонок CSV</td></tr><tr><td>Тип алгоритма</td><td>Выбор типа алгоритма</td></tr><tr><td>Путь к модели</td><td>[Текст] Путь сохранения файла модели</td></tr><tr><td>Уровень обработки</td><td>Выбор уровня обработки ошибок. Возможные значения: "Default" - по умолчанию; "Ignore" - ошибки игнорируются; "Handle" - ошибки обрабатываются. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы</td></tr><tr><td>Уровень сообщений</td><td>Выбор уровня сообщений, которые будут выводить блоки при работе. Возможные значения: "Default" - по умолчанию; "Release" - вывод отключен; "Debug" - вывод основной информации; "Detailed" - вывод подробной информации. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы</td></tr><tr><td>Текст ошибки</td><td>[Текст] Возвращает подробную информацию об ошибке в случае некорректного выполнения работы блока</td></tr></tbody></table>

### Классификация

Классифицирует входные данные на основе обученной модели машинного обучения.

<table data-header-hidden><thead><tr><th width="244"></th><th></th></tr></thead><tbody><tr><td>Путь к модели</td><td>[Текст] Путь к файлу модели. Модель должна быть создана с помощью блока "Обучение модели классификации"</td></tr><tr><td>Данные</td><td>[Таблица данных] Входные данные. Колонки у таблицы должны совпадать с колонками, на которых происходило обучение модели</td></tr><tr><td>Название целевой колонки</td><td>[Текст] Название колонки для записи результата. Если колонки нет в данных, поступающих на вход блока, то она будет добавлена. Например: "PredictedLabel"</td></tr><tr><td>Результат</td><td>[Таблица данных] Результат классификации</td></tr><tr><td>Уровень обработки</td><td>Выбор уровня обработки ошибок. Возможные значения: "Default" - по умолчанию; "Ignore" - ошибки игнорируются; "Handle" - ошибки обрабатываются. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы</td></tr><tr><td>Уровень сообщений</td><td>Выбор уровня сообщений, которые будут выводить блоки при работе. Возможные значения: "Default" - по умолчанию; "Release" - вывод отключен; "Debug" - вывод основной информации; "Detailed" - вывод подробной информации. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы</td></tr><tr><td>Текст ошибки</td><td>[Текст] Возвращает подробную информацию об ошибке в случае некорректного выполнения работы блока</td></tr></tbody></table>

### Обучение модели кластеризации

Создаёт новую модель машинного обучения для кластеризации, обучает её на основе входных данных и сохраняет итоговую модель в файл.

<table data-header-hidden><thead><tr><th width="250"></th><th></th></tr></thead><tbody><tr><td>Данные для обучения</td><td>[Текст] Путь к файлу CSV, содержащему данные для обучения. Файл должен обязательно содержать корректные заголовки. Файл должен быть в формате UTF8</td></tr><tr><td>Номера колонок данных</td><td>[Текст] Номера колонок, содержащих данные. Разделитель запятая. Нумерация начинается с нуля. Например: "1,3"</td></tr><tr><td>Номера строковых колонок</td><td>[Текст] Номера колонок, содержащих текстовые данные. Разделитель запятая. Если данное значение будет не заполнено, то тип колонки будет распознаваться автоматически. Нумерация начинается с нуля. Например: "1,3"</td></tr><tr><td>Разделитель</td><td>[Текст] Разделитель колонок CSV</td></tr><tr><td>Тип алгоритма</td><td>Выбор типа алгоритма</td></tr><tr><td>Путь к модели</td><td>[Текст] Путь сохранения файла модели</td></tr><tr><td>Уровень обработки</td><td>Выбор уровня обработки ошибок. Возможные значения: "Default" - по умолчанию; "Ignore" - ошибки игнорируются; "Handle" - ошибки обрабатываются. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы</td></tr><tr><td>Уровень сообщений</td><td>Выбор уровня сообщений, которые будут выводить блоки при работе. Возможные значения: "Default" - по умолчанию; "Release" - вывод отключен; "Debug" - вывод основной информации; "Detailed" - вывод подробной информации. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы</td></tr><tr><td>Текст ошибки</td><td>[Текст] Возвращает подробную информацию об ошибке в случае некорректного выполнения работы блока</td></tr></tbody></table>

### Кластеризация

Кластеризация входных данных на основе обученной модели машинного обучения.

<table data-header-hidden><thead><tr><th width="246"></th><th></th></tr></thead><tbody><tr><td>Путь к модели</td><td>[Текст] Путь к файлу модели. Модель должна быть создана с помощью блока "Обучение модели кластеризации"</td></tr><tr><td>Данные</td><td>[Таблица данных] Входные данные. Колонки у таблицы должны совпадать с колонками, на которых происходило обучение модели</td></tr><tr><td>Название целевой колонки</td><td>[Текст] Название колонки для записи результата. Если колонки нет в данных, поступающих на вход блока, то она будет добавлена. Алгоритм позволяет записать в разные колонки id кластера и расстояние. Для этого в данном свойстве укажите два названия колонок через запятую. Например: "ClusterId,Distances"</td></tr><tr><td>Результат</td><td>[Таблица данных] Результат кластеризации</td></tr><tr><td>Уровень обработки</td><td>Выбор уровня обработки ошибок. Возможные значения: "Default" - по умолчанию; "Ignore" - ошибки игнорируются; "Handle" - ошибки обрабатываются. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы</td></tr><tr><td>Уровень сообщений</td><td>Выбор уровня сообщений, которые будут выводить блоки при работе. Возможные значения: "Default" - по умолчанию; "Release" - вывод отключен; "Debug" - вывод основной информации; "Detailed" - вывод подробной информации. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы</td></tr><tr><td>Текст ошибки</td><td>[Текст] Возвращает подробную информацию об ошибке в случае некорректного выполнения работы блока</td></tr></tbody></table>

### Обучение модели выявления аномалий

Создаёт новую модель машинного обучения для выявления аномалий, обучает её на основе входных данных и сохраняет итоговую модель в файл.

<table data-header-hidden><thead><tr><th width="249"></th><th></th></tr></thead><tbody><tr><td>Данные для обучения</td><td>[Текст] Путь к файлу CSV, содержащему данные для обучения. Файл должен обязательно содержать корректные заголовки. Файл должен быть в формате UTF8</td></tr><tr><td>Количество компонентов</td><td>[Число] Количество компонентов в PCA (rank). Для автоматического определения задайте значение ноль</td></tr><tr><td>Номера колонок данных</td><td>[Текст] Номера колонок, содержащих данные. Разделитель запятая. Нумерация начинается с нуля. Например: "1,3"</td></tr><tr><td>Номера строковых колонок</td><td>[Текст] Номера колонок, содержащих текстовые данные. Разделитель запятая. Если данное значение будет не заполнено, то тип колонки будет распознаваться автоматически. Нумерация начинается с нуля. Например: "1,3"</td></tr><tr><td>Разделитель</td><td>[Текст] Разделитель колонок CSV</td></tr><tr><td>Тип алгоритма</td><td>Выбор типа алгоритма</td></tr><tr><td>Путь к модели</td><td>[Текст] Путь сохранения файла модели</td></tr><tr><td>Уровень обработки</td><td>Выбор уровня обработки ошибок. Возможные значения: "Default" - по умолчанию; "Ignore" - ошибки игнорируются; "Handle" - ошибки обрабатываются. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы</td></tr><tr><td>Уровень сообщений</td><td>Выбор уровня сообщений, которые будут выводить блоки при работе. Возможные значения: "Default" - по умолчанию; "Release" - вывод отключен; "Debug" - вывод основной информации; "Detailed" - вывод подробной информации. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы</td></tr><tr><td>Текст ошибки</td><td>[Текст] Возвращает подробную информацию об ошибке в случае некорректного выполнения работы блока</td></tr></tbody></table>

### Выявление аномалий

Выявление аномалий на основе обученной модели машинного обучения.

<table data-header-hidden><thead><tr><th width="248"></th><th></th></tr></thead><tbody><tr><td>Путь к модели</td><td>[Текст] Путь к файлу модели. Модель должна быть создана с помощью блока "Обучение модели выявления аномалий"</td></tr><tr><td>Данные</td><td>[Таблица данных] Входные данные. Колонки у таблицы должны совпадать с колонками, на которых происходило обучение модели</td></tr><tr><td>Название целевой колонки</td><td>[Текст] Название колонки для записи результата. Если колонки нет в данных, поступающих на вход блока, то она будет добавлена. Алгоритм позволяет записать в разные колонки метку и счет. Для этого в данном свойстве укажите два названия колонок через запятую. Например: "PredictedLabel,Score"</td></tr><tr><td>Результат</td><td>[Таблица данных] Результат выявления аномалий</td></tr><tr><td>Уровень обработки</td><td>Выбор уровня обработки ошибок. Возможные значения: "Default" - по умолчанию; "Ignore" - ошибки игнорируются; "Handle" - ошибки обрабатываются. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы</td></tr><tr><td>Уровень сообщений</td><td>Выбор уровня сообщений, которые будут выводить блоки при работе. Возможные значения: "Default" - по умолчанию; "Release" - вывод отключен; "Debug" - вывод основной информации; "Detailed" - вывод подробной информации. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы</td></tr><tr><td>Текст ошибки</td><td>[Текст] Возвращает подробную информацию об ошибке в случае некорректного выполнения работы блока</td></tr></tbody></table>

### Запрос к GPT модели

Этот блок позволяет отправлять запросы к классическим генеративным моделям Open AI до ChatGPT. С его помощью вы можете создавать новые тексты по запросу, выполнять разнообразные задачи классификации, суммаризации, перевода и рерайтинга текстов, написание прототипов кода на разных языках программирования, парсить полуструктурированные и неструктурированные данные, извлекать и обрабатывать факты, поддерживать диалог на разнообразные темы, и многое другое. Оплата за использование данного функционала списывается с лицевого счета клиента на платформе. Для тестовых целей каждому новому пользователю даётся возможность протестировать данный функционал без оплаты. При использовании данного функционала после окончания разработки робота необходима оплата.

<table data-header-hidden><thead><tr><th width="221"></th><th></th></tr></thead><tbody><tr><td>Запрос</td><td>[Текст] Введите запрос на естественном языке</td></tr><tr><td>Модель</td><td>Выберите модель для генерации текста. Модель "text-davinci-003" предлагает наибольшее качество генерации, однако её использование наиболее дорогое и медленное. Другие модели могут предлагать более дешевые и более быстрые результаты, за счет некоторой потери качества генерации. Методом проб и ошибок подберите модель, которая лучше всего подходит для решения ваших задач.</td></tr><tr><td>Свое название модели</td><td>[Текст] Укажите свое название модели, которую поддерживает Sherpa AI Server</td></tr><tr><td>Стоп-слова</td><td>[Текст/Список] Строка или список, содержащий не более 4 строк, которые остановят дальнейшую генерацию. Возвращаемый текст не будет содержать эти слова</td></tr><tr><td>Температура</td><td>[Число] Десятичное дробное число от 0 до 1, показывающее степень "случайности" или "креативности" результата, где 0 - наименее креативный результат, а 1 - максимально случайный. Для большинства творческих задач лучше подходит значение 0.7, а если вы хотите на один и тот же запрос каждый раз получать одинаковый ответ - установите значение 0.</td></tr><tr><td>Максимальная длина</td><td>[Число] Максимальная длина результата, выраженная в условных токенах. Для английского языка 1 токен - это 4 символа, для большинства других языков 1 токен - это 1 символ. Уменьшите это число, если хотите получать в среднем более короткие запросы, увеличьте для получения более длинных запросов. Учтите, что данное число ограничивает длину ответа, однако не обязательно полученный ответ будет указанной вами длины - в зависимости от содержимого запроса он может быть короче.</td></tr><tr><td>Автоограничение длины</td><td>При включении указанная максимальная длина длина будет автоматически скорректирована. Для этого вычисляется количество токенов в запросе и учитывается максимально возможное количество токенов для выбранной модели</td></tr><tr><td>Таймаут</td><td>[Число] Максимальное время ожидания ответа в секундах. Реальное время ожидания зависит от выбранной модели, длины вашего запроса и прогнозируемой длины ответа, а также от текущей загруженности серверов. В случае превышения установленного предела ожидания возникает ошибка.</td></tr><tr><td>Ответ</td><td>[Текст] Ответ генеративной модели на запрос</td></tr><tr><td>Итоговая длина</td><td>[Число] Итоговая длина запроса и результата (объединенных вместе), выраженная в условных токенах</td></tr><tr><td>Уровень обработки</td><td>Выбор уровня обработки ошибок. Возможные значения: "Default" - по умолчанию; "Ignore" - ошибки игнорируются; "Handle" - ошибки обрабатываются. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы</td></tr><tr><td>Уровень сообщений</td><td>Выбор уровня сообщений, которые будут выводить блоки при работе. Возможные значения: "Default" - по умолчанию; "Release" - вывод отключен; "Debug" - вывод основной информации; "Detailed" - вывод подробной информации. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы</td></tr><tr><td>Текст ошибки</td><td>[Текст] Возвращает подробную информацию об ошибке в случае некорректного выполнения работы блока</td></tr></tbody></table>

### Запрос к ChatGPT

Этот блок позволяет отправлять запросы к новым генеративным моделям от Open AI начиная с ChatGPT. С его помощью вы можете создавать новые тексты по запросу, выполнять разнообразные задачи классификации, суммаризации, перевода и рерайтинга текстов, написание прототипов кода на разных языках программирования, парсить полуструктурированные и неструктурированные данные, извлекать и обрабатывать факты, поддерживать диалог на разнообразные темы, и многое другое. Оплата за использование данного функционала списывается с лицевого счета клиента на платформе. Для тестовых целей каждому новому пользователю даётся возможность протестировать данный функционал без оплаты. При использовании данного функционала после окончания разработки робота необходима оплата.

<table data-header-hidden><thead><tr><th width="227"></th><th></th></tr></thead><tbody><tr><td>История чата</td><td>[Таблица Данных] Добавьте историю чата, на основе контекста которого нейросеть должна сгенерировать ответ. Указанная таблица данных должна содержать колонки с именами "role" и "content". При отсутствии таких колонок в качестве "role" будет использована первая колонка таблицы, в качестве "content" - вторая колонка. В колонке "role" можно указать только одно из следующих значений: system, assistant и user. Роль system предназначена для настройки тональности и базовых установок нейросети, например с ролью "system" можно написать "You are helpful assistant on used cars selection. You know everything on how to choose the best deal for used car". С ролью "assistant" рекомендуется включать предыдущие сообщения, сгенерированный самой нейросетью. С ролью "user" рекомендуется включать реплики, написанные пользователем-собеседником. Более старые сообщения должны быть размещены в начале таблицы, более новые - в конце таблицы. Колонка "content" должна содержать само сообщение. Данное свойство можно оставить пустым, тогда генерация будет выполнена только по содержимому свойств "Роль" и "Запрос". Если используется свойство "Инструменты", то в таблице должно быть 4 колонки: "role", "content", "tool_call_id", "name"</td></tr><tr><td>Запрос System</td><td>[Текст] Введите текст нового запроса к нейросети. Запрос будет выполняться с ролью system</td></tr><tr><td>Запрос User</td><td>[Текст] Введите текст нового запроса к нейросети. Запрос будет выполняться с ролью user</td></tr><tr><td>Модель</td><td>Выберите модель для генерации ответа</td></tr><tr><td>Свое название модели</td><td>[Текст] Укажите свое название модели, которую поддерживает Sherpa AI Server</td></tr><tr><td>Стоп-слова</td><td>[Текст/Список] Строка или список, содержащий не более 4 строк, которые остановят дальнейшую генерацию. Возвращаемый текст не будет содержать эти слова</td></tr><tr><td>Температура</td><td>[Число] Десятичное дробное число от 0 до 1, показывающее степень "случайности" или "креативности" результата, где 0 - наименее креативный результат, а 1 - максимально случайный. Для большинства творческих задач лучше подходит значение 0.7, а если вы хотите на один и тот же запрос каждый раз получать одинаковый ответ - установите значение 0.</td></tr><tr><td>Максимальная длина</td><td>[Число] Максимальная длина результата, выраженная в условных токенах. Для английского языка 1 токен - это 4 символа, для большинства других языков 1 токен - это 1 символ. Уменьшите это число, если хотите получать в среднем более короткие запросы, увеличьте для получения более длинных запросов. Учтите, что данное число ограничивает длину ответа, однако не обязательно полученный ответ будет указанной вами длины - в зависимости от содержимого запроса он может быть короче.</td></tr><tr><td>Автоограничение длины</td><td>При включении указанная максимальная длина длина будет автоматически скорректирована. Для этого вычисляется количество токенов в запросе и учитывается максимально возможное количество токенов для выбранной модели</td></tr><tr><td>Инструменты</td><td>[Таблица Данных] Таблица с описанием инструментов, которые может выбрать нейросеть для решения задачи вместо текстового ответа. Этот функционал поддерживают не все модели. Таблица данных должна содержать три колонки: "name" - название инструмента (латинские буквы и цифры, не более 64 символов), "description" - описание инструмента (может быть на отличных от английского языках), "parameters" - аргументы передаваемые в инструмент при его вызове в формате JSON. Пример JSON-описания параметров: "{\"type\": \"object\", \"properties\": { \"query\": { \"type\": \"string\", \"description\": \"Request for a Google search result\" }  }, \"required\": [\"query\"] }". При вызове инструмента нейросеть выберет подходящий инструмент из числа доступных, опираясь на указанное вами описание инструментов, а также заполнит (сгенерирует) значения указанных вами параметров для вызова этих инструментов. Более подробно про механизм использования инструментов можно узнать из описания выходного свойства CalledTools.</td></tr><tr><td>Использовать инструмент</td><td>[Текст] При необходимости можно принудительно указать название инструмента, который нейросеть должна использовать в текущем запросе. Название должно совпадать с названием одного из инструментов из колонки "name" в таблице "Инструменты".</td></tr><tr><td>Таймаут</td><td>[Число] Максимальное время ожидания ответа в секундах. Реальное время ожидания зависит от выбранной модели, длины вашего запроса и прогнозируемой длины ответа, а также от текущей загруженности серверов. В случае превышения установленного предела ожидания возникает ошибка.</td></tr><tr><td>Роль ответа</td><td>[Текст] Роль, с которой ответила нейросеть</td></tr><tr><td>Ответ</td><td>[Текст] Текст ответа нейросети</td></tr><tr><td>Итоговая длина</td><td>[Число] Итоговая длина запроса и результата (объединенных вместе), выраженная в условных токенах</td></tr><tr><td>Вызываемые инструменты</td><td>[Список] Список объектов ToolItem. Если нейросеть после запроса вместо текстового ответа предлагает использовать один или несколько инструментов, указанные в свойстве "Инструменты", то в данном свойстве будет возвращен список объектов ToolItem. Объект содержит следующие свойства: id, name, arguments. Значения id, name необходимо использовать в таблице "История чата". Свойство arguments является словарем, где ключ - это название параметра вызываемого инструмента, а значение является сгенерированным нейросетью значением этого параметра. При использовании механизма инструментов после вызова данного блока вы должны проверить, выбрала ли нейросеть какой-либо инструмент, по содержимому данного списка. Если список не пустой, вы должны самостоятельно реализовать функционал выбранного инструмента или инструментов в сценарии робота, а затем в следующем вызове данного блока вернуть нейросети результат выполнения инструмента, который нейросеть будет использовать в генерации последующих сообщений. Результат выполнения инструментов необходимо записывать в таблицу "История чата" следующим образом: в колонку "role" записывается константное значение "tool", в колонку "content" - значение результата выполнения инструмента (который вы реализовали в вашем сценарии и теперь сообщаете этот результат нейросети), в колонку "tool_call_id" - значение текущего ToolItem.id, в колонку "name" - значение текущего ToolItem.name.</td></tr><tr><td>Уровень обработки</td><td>Выбор уровня обработки ошибок. Возможные значения: "Default" - по умолчанию; "Ignore" - ошибки игнорируются; "Handle" - ошибки обрабатываются. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы</td></tr><tr><td>Уровень сообщений</td><td>Выбор уровня сообщений, которые будут выводить блоки при работе. Возможные значения: "Default" - по умолчанию; "Release" - вывод отключен; "Debug" - вывод основной информации; "Detailed" - вывод подробной информации. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы</td></tr><tr><td>Текст ошибки</td><td>[Текст] Возвращает подробную информацию об ошибке в случае некорректного выполнения работы блока</td></tr></tbody></table>

### Подсчитать токены

Подсчитывает количество токенов в указанном запросе.

<table data-header-hidden><thead><tr><th width="205"></th><th></th></tr></thead><tbody><tr><td>Запрос</td><td>[Текст] Запрос для подсчитывания количества токенов</td></tr><tr><td>Модель</td><td>Выбор модели</td></tr><tr><td>Количество токенов</td><td>[Число] Возвращается количество токенов в запросе</td></tr><tr><td>Уровень обработки</td><td>Выбор уровня обработки ошибок. Возможные значения: "Default" - по умолчанию; "Ignore" - ошибки игнорируются; "Handle" - ошибки обрабатываются. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы</td></tr><tr><td>Уровень сообщений</td><td>Выбор уровня сообщений, которые будут выводить блоки при работе. Возможные значения: "Default" - по умолчанию; "Release" - вывод отключен; "Debug" - вывод основной информации; "Detailed" - вывод подробной информации. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы</td></tr><tr><td>Текст ошибки</td><td>[Текст] Возвращает подробную информацию об ошибке в случае некорректного выполнения работы блока</td></tr></tbody></table>

### Получить эмбеддинги

Блок позволяет получить эмбеддинги по строке или списку строк с использованием сервиса Open AI. Эмбеддинг - это вектор (набор чисел), которые характеризуют смысл, ассоциированный с переданной входной текста. Слова или предложения с близким смыслом будут иметь эмбеддинги с минимальным косинусным расстоянием. Эмбеддинги в том числе могут использоваться для поиска наиболее близких по смыслу слов, строк или абзацев в базах данных документов.

<table data-header-hidden><thead><tr><th width="216"></th><th></th></tr></thead><tbody><tr><td>Текст</td><td>[Текст/Список] Входной текст или список текстов, для которого будут рассчитаны эмбеддинги. Если на вход передан список текстов, на выходе также будет список эмбеддингов для каждого из элементов входного текста. Максимально допустимая длина каждой строки - 8192 токенов.</td></tr><tr><td>Модель</td><td>Выберите модель для генерации ответа</td></tr><tr><td>Как таблица данных</td><td>При включении результат будет возвращен как таблица данных с двумя колонками: "Text" и "Embeddings"</td></tr><tr><td>Таймаут</td><td>[Число] Максимальное время ожидания ответа в секундах.</td></tr><tr><td>Эмбеддинги</td><td>[Текст/Список/Таблица Данных] Если на вход была передана одна строка, то выход - это векторное представление эмбеддинга в формате JSON (массив чисел). Если на вход был передан список строк, то на выходе будет список эмбеддингов в формате JSON (массив чисел). Если включено свойство "Как таблица данных", то на выходе будет таблица данных с двумя колонками: "Text" и "Embeddings"</td></tr><tr><td>Уровень обработки</td><td>Выбор уровня обработки ошибок. Возможные значения: "Default" - по умолчанию; "Ignore" - ошибки игнорируются; "Handle" - ошибки обрабатываются. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы</td></tr><tr><td>Уровень сообщений</td><td>Выбор уровня сообщений, которые будут выводить блоки при работе. Возможные значения: "Default" - по умолчанию; "Release" - вывод отключен; "Debug" - вывод основной информации; "Detailed" - вывод подробной информации. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы</td></tr><tr><td>Текст ошибки</td><td>[Текст] Возвращает подробную информацию об ошибке в случае некорректного выполнения работы блока</td></tr></tbody></table>

### Найти эмбеддинги

Блок позволяет по заданному запросу-эмбеддингу найти в базе знаний, представляющей собой таблицу объектов и их эмбеддингов, самые похожие строки и возвратить индексы этих строк в виде списка, отсортированного по убыванию похожести. Эмбеддинги и для запроса, и для таблицы эмбеддингов, по которой осуществляется поиск, могут быть получены с помощью блока Получить эмбеддинги. При первом использовании блока происходит построение базы данных векторов и это может занимать длительное время. При последующих вызовах блока с одним и тем же "ID базы" будет использоваться уже созданная база данных векторов и скорость работы блока возрастает многократно.

<table data-header-hidden><thead><tr><th width="222"></th><th></th></tr></thead><tbody><tr><td>Эмбеддинг запроса</td><td>[Текст] Эмбеддинг, для которого необходимо найти похожие строки в таблице. Значение для данного поля может быть получено с помощью блока Получить эмбеддинг.</td></tr><tr><td>База знаний</td><td>[Таблица Данных] Таблица, по которой будет осуществляться поиск. Одна из колонок таблицы должна содержать эмбеддинги, другие колонки таблицы могут содержать любые пользовательские данные.</td></tr><tr><td>ID базы</td><td>[Текст] Можно указать другой ID базы, чтобы блок при первом запуске начал строить базу данных векторов заново. При первом использовании блока происходит построение базы данных векторов и это может занимать длительное время. При последующих вызовах блока с одним и тем же "ID базы" будет использоваться уже созданная база данных векторов и скорость работы блока возрастает многократно</td></tr><tr><td>Колонка эмбеддингов</td><td>[Число/Текст] Индекс или название колонки из таблицы, указанной в свойстве "База знаний", в которой размещены эмбеддинги. По умолчанию 1.</td></tr><tr><td>Количество результатов</td><td>[Число] Максимальное количество возвращаемых блоком строк-результатов из базы знаний. По умолчанию 5.</td></tr><tr><td>Индексы строк</td><td>[Список] Список индексов строк из Базы знаний, содержащих наиболее похожие на запрос эмбеддинги, отсортированный в порядке убывания похожести.</td></tr><tr><td>Похожесть</td><td>[Список] Числовые меры похожести для каждого из результатов</td></tr><tr><td>Уровень обработки</td><td>Выбор уровня обработки ошибок. Возможные значения: "Default" - по умолчанию; "Ignore" - ошибки игнорируются; "Handle" - ошибки обрабатываются. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы</td></tr><tr><td>Уровень сообщений</td><td>Выбор уровня сообщений, которые будут выводить блоки при работе. Возможные значения: "Default" - по умолчанию; "Release" - вывод отключен; "Debug" - вывод основной информации; "Detailed" - вывод подробной информации. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы</td></tr><tr><td>Текст ошибки</td><td>[Текст] Возвращает подробную информацию об ошибке в случае некорректного выполнения работы блока</td></tr></tbody></table>

### AI Server. Добавить документ

Блок добавляет документ в базу знаний на сервер Sherpa AI Server. Документ автоматически разбивается на чанки, для каждого из которых будет получен эмбеддинг. Эмбеддинг - это вектор (набор чисел), которые характеризуют смысл, ассоциированный с переданной входной текста. Слова или предложения с близким смыслом будут иметь эмбеддинги с минимальным косинусным расстоянием. Эмбеддинги в том числе могут использоваться для поиска наиболее близких по смыслу слов, строк или абзацев в базах данных документов.

| Имя файла         | \[Текст] Имя и путь к файлу                                                                                                                                                                                                                                                                                               |
| ----------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Таймаут           | \[Число] Максимальное время ожидания ответа в секундах.                                                                                                                                                                                                                                                                   |
| Уровень обработки | Выбор уровня обработки ошибок. Возможные значения: "Default" - по умолчанию; "Ignore" - ошибки игнорируются; "Handle" - ошибки обрабатываются. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы                                                                           |
| Уровень сообщений | Выбор уровня сообщений, которые будут выводить блоки при работе. Возможные значения: "Default" - по умолчанию; "Release" - вывод отключен; "Debug" - вывод основной информации; "Detailed" - вывод подробной информации. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы |
| Текст ошибки      | \[Текст] Возвращает подробную информацию об ошибке в случае некорректного выполнения работы блока                                                                                                                                                                                                                         |

### AI Server. Добавить чанки

Блок добавляет чанки в базу знаний на сервере Sherpa AI Server. Для каждого чанка будет получен эмбеддинг. Эмбеддинг - это вектор (набор чисел), которые характеризуют смысл, ассоциированный с переданной входной текста. Слова или предложения с близким смыслом будут иметь эмбеддинги с минимальным косинусным расстоянием. Эмбеддинги в том числе могут использоваться для поиска наиболее близких по смыслу слов, строк или абзацев в базах данных документов.

| Текст             | \[Текст/Список] Входной текст или список текстов, для которого будут рассчитаны эмбеддинги                                                                                                                                                                                                                                |
| ----------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Таймаут           | \[Число] Максимальное время ожидания ответа в секундах.                                                                                                                                                                                                                                                                   |
| Уровень обработки | Выбор уровня обработки ошибок. Возможные значения: "Default" - по умолчанию; "Ignore" - ошибки игнорируются; "Handle" - ошибки обрабатываются. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы                                                                           |
| Уровень сообщений | Выбор уровня сообщений, которые будут выводить блоки при работе. Возможные значения: "Default" - по умолчанию; "Release" - вывод отключен; "Debug" - вывод основной информации; "Detailed" - вывод подробной информации. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы |
| Текст ошибки      | \[Текст] Возвращает подробную информацию об ошибке в случае некорректного выполнения работы блока                                                                                                                                                                                                                         |

### AI Server. Найти эмбеддинги

Блок позволяет по заданному запросу-эмбеддингу найти в базе знаний самые похожие строки и возвратить их список, отсортированного по убыванию похожести. Базу знаний можно заполнять блоками "AI Server. Добавить документ" и "AI Server. Добавить чанки"

| Запрос                 | \[Текст] Текст запроса, по которому нужно найти в базе знаний близкие по схожести чанки                                                                                                                                                                                                                                   |
| ---------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Количество результатов | \[Число] Максимальное количество возвращаемых блоком строк-результатов из базы знаний. По умолчанию 5.                                                                                                                                                                                                                    |
| Таймаут                | \[Число] Максимальное время ожидания ответа в секундах.                                                                                                                                                                                                                                                                   |
| Результат              | \[Список] Список строк близких по схожести с запросов, отсортированные по увеличению схожести                                                                                                                                                                                                                             |
| Уровень обработки      | Выбор уровня обработки ошибок. Возможные значения: "Default" - по умолчанию; "Ignore" - ошибки игнорируются; "Handle" - ошибки обрабатываются. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы                                                                           |
| Уровень сообщений      | Выбор уровня сообщений, которые будут выводить блоки при работе. Возможные значения: "Default" - по умолчанию; "Release" - вывод отключен; "Debug" - вывод основной информации; "Detailed" - вывод подробной информации. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы |
| Текст ошибки           | \[Текст] Возвращает подробную информацию об ошибке в случае некорректного выполнения работы блока                                                                                                                                                                                                                         |

### Синтезировать речь (Yandex)

Синтезирует речь из указанного текста. Поддерживаемые форматы: mp3; ogg; wav

| Текст             | \[Текст] Текст, который необходимо синтезировать. В тексте возможно использование TTS-разметки                                                                                                                                                                                                                            |
| ----------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Голос и язык      | Выбор голоса и языка для синтезирования речи                                                                                                                                                                                                                                                                              |
| Аудиофайл         | \[Текст] Имя и путь к файлу куда будет сохранен результат. Поддерживаемые форматы: mp3; wav; ogg. Если значение не указано, то будет создан временный файл с форматом mp3                                                                                                                                                 |
| Результат         | \[Текст] Имя и путь к созданному файлу                                                                                                                                                                                                                                                                                    |
| Уровень обработки | Выбор уровня обработки ошибок. Возможные значения: "Default" - по умолчанию; "Ignore" - ошибки игнорируются; "Handle" - ошибки обрабатываются. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы                                                                           |
| Уровень сообщений | Выбор уровня сообщений, которые будут выводить блоки при работе. Возможные значения: "Default" - по умолчанию; "Release" - вывод отключен; "Debug" - вывод основной информации; "Detailed" - вывод подробной информации. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы |
| Текст ошибки      | \[Текст] Возвращает подробную информацию об ошибке в случае некорректного выполнения работы блока                                                                                                                                                                                                                         |

### Распознать речь (Yandex)

Распознает речь из аудио файла в текст. Поддерживаемые форматы: mp3; ogg; wav. Максимальный размер файла - 1 МБ. Максимальная длительность - 30 секунд.

| Аудиофайл         | \[Текст] Имя и путь входного аудиофайла. Поддерживаемые форматы: mp3; ogg; wav. Максимальный размер файла - 1 МБ. Максимальная длительность - 30 секунд.                                                                                                                                                                  |
| ----------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Язык              | Язык распознавания                                                                                                                                                                                                                                                                                                        |
| Результат         | \[Текст] Распознанная строка                                                                                                                                                                                                                                                                                              |
| Уровень обработки | Выбор уровня обработки ошибок. Возможные значения: "Default" - по умолчанию; "Ignore" - ошибки игнорируются; "Handle" - ошибки обрабатываются. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы                                                                           |
| Уровень сообщений | Выбор уровня сообщений, которые будут выводить блоки при работе. Возможные значения: "Default" - по умолчанию; "Release" - вывод отключен; "Debug" - вывод основной информации; "Detailed" - вывод подробной информации. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы |
| Текст ошибки      | \[Текст] Возвращает подробную информацию об ошибке в случае некорректного выполнения работы блока                                                                                                                                                                                                                         |

### Синтезировать речь (Whisper)

Синтезирует речь из указанного текста. Поддерживаемый формат: mp3

| Текст             | \[Текст] Текст, который необходимо синтезировать                                                                                                                                                                                                                                                                          |
| ----------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Модель            | Выбор модели для синтеза речи                                                                                                                                                                                                                                                                                             |
| Голос             | Выбор голоса для синтеза речи                                                                                                                                                                                                                                                                                             |
| Аудиофайл         | \[Текст] Имя и путь к файлу куда будет сохранен результат. Поддерживаемые форматы: mp3. Если значение не указано, то будет создан временный файл с форматом mp3                                                                                                                                                           |
| Скорость речи     | \[Число] Значение скорости речи для синтеза. Значение может быть в диапазоне от 0.25 до 4. Значение по умолчанию 1                                                                                                                                                                                                        |
| Таймаут           | \[Число] Максимальное время ожидания ответа в секундах                                                                                                                                                                                                                                                                    |
| Результат         | \[Текст] Имя и путь к созданному файлу                                                                                                                                                                                                                                                                                    |
| Уровень обработки | Выбор уровня обработки ошибок. Возможные значения: "Default" - по умолчанию; "Ignore" - ошибки игнорируются; "Handle" - ошибки обрабатываются. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы                                                                           |
| Уровень сообщений | Выбор уровня сообщений, которые будут выводить блоки при работе. Возможные значения: "Default" - по умолчанию; "Release" - вывод отключен; "Debug" - вывод основной информации; "Detailed" - вывод подробной информации. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы |
| Текст ошибки      | \[Текст] Возвращает подробную информацию об ошибке в случае некорректного выполнения работы блока                                                                                                                                                                                                                         |

### Распознать речь (Whisper)

Распознает речь из аудио файла в текст. Поддерживаемый формат: mp3. Максимальный размер файла - 25 МБ

| Аудиофайл         | \[Текст] Имя и путь входного аудиофайла. Поддерживаемый формат: mp3. Максимальный размер файла - 25 МБ                                                                                                                                                                                                                                                                                                           |
| ----------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Модель            | Выбор модели для распознавания речи                                                                                                                                                                                                                                                                                                                                                                              |
| Язык аудио        | \[Текст] Язык аудио. При необходимости можно указать значение языка в формате ISO 639-1. Это повысит точность распознавания и увеличит скорость работы. Например: "en" - Английский; "ru" - Русский                                                                                                                                                                                                              |
| Подсказка         | \[Текст] При необходимости можно указать подсказку для языковой модели. Язык подсказки должен соответствовать языку аудиофайла                                                                                                                                                                                                                                                                                   |
| Температура       | \[Число] Температура выборки от 0 до 1. Более высокие значения, например 0,8, сделают выходные данные более случайными, в то время как более низкие значения, например 0,2, сделают их более целенаправленными и детерминированными. Если установлено значение 0, модель будет использовать логарифмическую вероятность для автоматического повышения температуры до достижения определенных пороговых значений. |
| Таймаут           | \[Число] Максимальное время ожидания ответа в секундах                                                                                                                                                                                                                                                                                                                                                           |
| Результат         | \[Текст] Распознанная строка                                                                                                                                                                                                                                                                                                                                                                                     |
| Уровень обработки | Выбор уровня обработки ошибок. Возможные значения: "Default" - по умолчанию; "Ignore" - ошибки игнорируются; "Handle" - ошибки обрабатываются. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы                                                                                                                                                                  |
| Уровень сообщений | Выбор уровня сообщений, которые будут выводить блоки при работе. Возможные значения: "Default" - по умолчанию; "Release" - вывод отключен; "Debug" - вывод основной информации; "Detailed" - вывод подробной информации. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы                                                                                        |
| Текст ошибки      | \[Текст] Возвращает подробную информацию об ошибке в случае некорректного выполнения работы блока                                                                                                                                                                                                                                                                                                                |

### Генерировать изображение (DALL-E)

Генерация изображения по текстовому запросу

| Текст                | \[Текст] Текст, по которому необходимо сгенерировать изображение. Например: "Космонавт на луне"                                                                                                                                                                                                                                   |
| -------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Модель               | Выбор модели для генерации изображения                                                                                                                                                                                                                                                                                            |
| Файл изображения     | \[Текст/Список] Имя и путь к файлу для сохранения изображения. Так же если указано количество более одного и выбрана модель "dall-e-2", то можно указать список файлов                                                                                                                                                            |
| Количество           | \[Число] Количество генерируемых изображений. Значение может быть в диапазоне от 1 до 10. Для модели "dall-e-3" значение всегда равно 1                                                                                                                                                                                           |
| Качество изображения | Качество изображения, которое будет сгенерировано. "hd" создает изображения с более мелкими деталями и большей согласованностью по всему изображению. Этот параметр поддерживается только для "dall-e-3".                                                                                                                         |
| Размер изображения   | Размер сгенерированных изображений. Должен быть одним из "256x256", "512x512" или "1024x1024" для "dall-e-2". Должно быть одно из разрешений "1024x1024", "1792x1024" или "1024x1792" для модели "dalle3".                                                                                                                        |
| Стиль изображения    | Стиль создаваемых изображений. Должен быть ярким ("vivid") или естественным ("natural"). Яркий заставляет модель склоняться к созданию гиперреальных и драматичных изображений. Естественный заставляет модель создавать более естественные, менее гиперреальные изображения. Этот параметр поддерживается только для "dall-e-3". |
| Таймаут              | \[Число] Максимальное время ожидания ответа в секундах                                                                                                                                                                                                                                                                            |
| Результат            | \[Текст/Список] Если сгенерировано только одно изображение, то возвращается имя и путь к файлу. Иначе возвращается список полных путей к файлам с их именами                                                                                                                                                                      |
| Уровень обработки    | Выбор уровня обработки ошибок. Возможные значения: "Default" - по умолчанию; "Ignore" - ошибки игнорируются; "Handle" - ошибки обрабатываются. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы                                                                                   |
| Уровень сообщений    | Выбор уровня сообщений, которые будут выводить блоки при работе. Возможные значения: "Default" - по умолчанию; "Release" - вывод отключен; "Debug" - вывод основной информации; "Detailed" - вывод подробной информации. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы         |
| Текст ошибки         | \[Текст] Возвращает подробную информацию об ошибке в случае некорректного выполнения работы блока                                                                                                                                                                                                                                 |

### Запрос к YandexGPT

Этот блок позволяет отправлять запросы к генеративным моделям YandexGPT. С его помощью вы можете создавать новые тексты по запросу, выполнять разнообразные задачи классификации, суммаризации, перевода и рерайтинга текстов, написание прототипов кода на разных языках программирования, парсить полуструктурированные и неструктурированные данные, извлекать и обрабатывать факты, поддерживать диалог на разнообразные темы, и многое другое. Оплата за использование данного функционала списывается с лицевого счета клиента на платформе. Для тестовых целей каждому новому пользователю даётся возможность протестировать данный функционал без оплаты. При использовании данного функционала после окончания разработки робота необходима оплата.

| История чата          | \[Таблица Данных] Добавьте историю чата, на основе контекста которого нейросеть должна сгенерировать ответ. Указанная таблица данных должна содержать колонки с именами "role" и "content". При отсутствии таких колонок в качестве "role" будет использована первая колонка таблицы, в качестве "content" - вторая колонка. В колонке "role" можно указать только одно из следующих значений: system, assistant и user. Роль system предназначена для настройки тональности и базовых установок нейросети, например с ролью "system" можно написать "You are helpful assistant on used cars selection. You know everything on how to choose the best deal for used car". С ролью "assistant" рекомендуется включать предыдущие сообщения, сгенерированный самой нейросетью. С ролью "user" рекомендуется включать реплики, написанные пользователем-собеседником. Более старые сообщения должны быть размещены в начале таблицы, более новые - в конце таблицы. Колонка "content" должна содержать само сообщение. Данное свойство можно оставить пустым, тогда генерация будет выполнена только по содержимому свойств "Роль" и "Запрос". Если используется свойство "Инструменты", то в таблице должно быть 4 колонки: "role", "content", "tool\_call\_id", "name" |
| --------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Запрос System         | \[Текст] Введите текст нового запроса к нейросети. Запрос будет выполняться с ролью system                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| Запрос User           | \[Текст] Введите текст нового запроса к нейросети. Запрос будет выполняться с ролью user                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| Модель                | Выберите модель для генерации ответа                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| Температура           | \[Число] Десятичное дробное число от 0 до 1, показывающее степень "случайности" или "креативности" результата, где 0 - наименее креативный результат, а 1 - максимально случайный. Для большинства творческих задач лучше подходит значение 0.7, а если вы хотите на один и тот же запрос каждый раз получать одинаковый ответ - установите значение 0.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Максимальная длина    | \[Число] Максимальная длина результата, выраженная в условных токенах. Для английского языка 1 токен - это 4 символа, для большинства других языков 1 токен - это 1 символ. Уменьшите это число, если хотите получать в среднем более короткие запросы, увеличьте для получения более длинных запросов. Учтите, что данное число ограничивает длину ответа, однако не обязательно полученный ответ будет указанной вами длины - в зависимости от содержимого запроса он может быть короче.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| Автоограничение длины | При включении указанная максимальная длина длина будет автоматически скорректирована. Для этого вычисляется количество токенов в запросе и учитывается максимально возможное количество токенов для выбранной модели                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| Таймаут               | \[Число] Максимальное время ожидания ответа в секундах. Реальное время ожидания зависит от выбранной модели, длины вашего запроса и прогнозируемой длины ответа, а также от текущей загруженности серверов. В случае превышения установленного предела ожидания возникает ошибка.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| Роль ответа           | \[Текст] Роль, с которой ответила нейросеть                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| Ответ                 | \[Текст] Текст ответа нейросети                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| Итоговая длина        | \[Число] Итоговая длина запроса и результата (объединенных вместе), выраженная в условных токенах                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| Уровень обработки     | Выбор уровня обработки ошибок. Возможные значения: "Default" - по умолчанию; "Ignore" - ошибки игнорируются; "Handle" - ошибки обрабатываются. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| Уровень сообщений     | Выбор уровня сообщений, которые будут выводить блоки при работе. Возможные значения: "Default" - по умолчанию; "Release" - вывод отключен; "Debug" - вывод основной информации; "Detailed" - вывод подробной информации. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| Текст ошибки          | \[Текст] Возвращает подробную информацию об ошибке в случае некорректного выполнения работы блока                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |

### Запрос к GigaChat

Этот блок позволяет отправлять запросы к генеративным моделям GigaChat. С его помощью вы можете создавать новые тексты по запросу, выполнять разнообразные задачи классификации, суммаризации, перевода и рерайтинга текстов, написание прототипов кода на разных языках программирования, парсить полуструктурированные и неструктурированные данные, извлекать и обрабатывать факты, поддерживать диалог на разнообразные темы, и многое другое. Оплата за использование данного функционала списывается с лицевого счета клиента на платформе. Для тестовых целей каждому новому пользователю даётся возможность протестировать данный функционал без оплаты. При использовании данного функционала после окончания разработки робота необходима оплата.

| История чата          | \[Таблица Данных] Добавьте историю чата, на основе контекста которого нейросеть должна сгенерировать ответ. Указанная таблица данных должна содержать колонки с именами "role" и "content". При отсутствии таких колонок в качестве "role" будет использована первая колонка таблицы, в качестве "content" - вторая колонка. В колонке "role" можно указать только одно из следующих значений: system, assistant и user. Роль system предназначена для настройки тональности и базовых установок нейросети, например с ролью "system" можно написать "You are helpful assistant on used cars selection. You know everything on how to choose the best deal for used car". С ролью "assistant" рекомендуется включать предыдущие сообщения, сгенерированный самой нейросетью. С ролью "user" рекомендуется включать реплики, написанные пользователем-собеседником. Более старые сообщения должны быть размещены в начале таблицы, более новые - в конце таблицы. Колонка "content" должна содержать само сообщение. Данное свойство можно оставить пустым, тогда генерация будет выполнена только по содержимому свойств "Роль" и "Запрос". Если используется свойство "Инструменты", то в таблице должно быть 4 колонки: "role", "content", "tool\_call\_id", "name" |
| --------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Запрос System         | \[Текст] Введите текст нового запроса к нейросети. Запрос будет выполняться с ролью system                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| Запрос User           | \[Текст] Введите текст нового запроса к нейросети. Запрос будет выполняться с ролью user                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| Модель                | Выберите модель для генерации ответа                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| Температура           | \[Число] Десятичное дробное число от 0 до 2, показывающее степень "случайности" или "креативности" результата, где 0 - наименее креативный результат, а 2 - максимально случайный. Для большинства творческих задач лучше подходит значение 0.7, а если вы хотите на один и тот же запрос каждый раз получать одинаковый ответ - установите значение 0.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Максимальная длина    | \[Число] Максимальная длина результата, выраженная в условных токенах. Для английского языка 1 токен - это 4 символа, для большинства других языков 1 токен - это 1 символ. Уменьшите это число, если хотите получать в среднем более короткие запросы, увеличьте для получения более длинных запросов. Учтите, что данное число ограничивает длину ответа, однако не обязательно полученный ответ будет указанной вами длины - в зависимости от содержимого запроса он может быть короче.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| Автоограничение длины | При включении указанная максимальная длина длина будет автоматически скорректирована. Для этого вычисляется количество токенов в запросе и учитывается максимально возможное количество токенов для выбранной модели                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| Таймаут               | \[Число] Максимальное время ожидания ответа в секундах. Реальное время ожидания зависит от выбранной модели, длины вашего запроса и прогнозируемой длины ответа, а также от текущей загруженности серверов. В случае превышения установленного предела ожидания возникает ошибка.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| Роль ответа           | \[Текст] Роль, с которой ответила нейросеть                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| Ответ                 | \[Текст] Текст ответа нейросети                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| Итоговая длина        | \[Число] Итоговая длина запроса и результата (объединенных вместе), выраженная в условных токенах                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| Уровень обработки     | Выбор уровня обработки ошибок. Возможные значения: "Default" - по умолчанию; "Ignore" - ошибки игнорируются; "Handle" - ошибки обрабатываются. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| Уровень сообщений     | Выбор уровня сообщений, которые будут выводить блоки при работе. Возможные значения: "Default" - по умолчанию; "Release" - вывод отключен; "Debug" - вывод основной информации; "Detailed" - вывод подробной информации. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| Текст ошибки          | \[Текст] Возвращает подробную информацию об ошибке в случае некорректного выполнения работы блока                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |

### Генерировать изображение Sber GigaChat

Генерация изображения по текстовому запросу

| Текст             | \[Текст] Текст, по которому необходимо сгенерировать изображение. Текст должен начинаться со слова "Нарисуй". Например: " Нарисуй космонавта на луне"                                                                                                                                                                     |
| ----------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Модель            | Выбор модели для генерации изображения                                                                                                                                                                                                                                                                                    |
| Файл изображения  | \[Текст] Имя и путь к файлу для сохранения изображения                                                                                                                                                                                                                                                                    |
| Таймаут           | \[Число] Максимальное время ожидания ответа в секундах                                                                                                                                                                                                                                                                    |
| Результат         | \[Текст] Возвращается имя и путь к файлу                                                                                                                                                                                                                                                                                  |
| Уровень обработки | Выбор уровня обработки ошибок. Возможные значения: "Default" - по умолчанию; "Ignore" - ошибки игнорируются; "Handle" - ошибки обрабатываются. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы                                                                           |
| Уровень сообщений | Выбор уровня сообщений, которые будут выводить блоки при работе. Возможные значения: "Default" - по умолчанию; "Release" - вывод отключен; "Debug" - вывод основной информации; "Detailed" - вывод подробной информации. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы |
| Текст ошибки      | \[Текст] Возвращает подробную информацию об ошибке в случае некорректного выполнения работы блока                                                                                                                                                                                                                         |

### Запрос к Sherpa AI Server

Этот блок позволяет отправлять запросы к генеративным моделям Sherpa AI Server. С его помощью вы можете создавать новые тексты по запросу, выполнять разнообразные задачи классификации, суммаризации, перевода и рерайтинга текстов, написание прототипов кода на разных языках программирования, парсить полуструктурированные и неструктурированные данные, извлекать и обрабатывать факты, поддерживать диалог на разнообразные темы, и многое другое. Оплата за использование данного функционала списывается с лицевого счета клиента на платформе. Для тестовых целей каждому новому пользователю даётся возможность протестировать данный функционал без оплаты. При использовании данного функционала после окончания разработки робота необходима оплата.

| История чата          | \[Таблица Данных] Добавьте историю чата, на основе контекста которого нейросеть должна сгенерировать ответ. Указанная таблица данных должна содержать колонки с именами "role" и "content". При отсутствии таких колонок в качестве "role" будет использована первая колонка таблицы, в качестве "content" - вторая колонка. В колонке "role" можно указать только одно из следующих значений: system, assistant и user. Роль system предназначена для настройки тональности и базовых установок нейросети, например с ролью "system" можно написать "You are helpful assistant on used cars selection. You know everything on how to choose the best deal for used car". С ролью "assistant" рекомендуется включать предыдущие сообщения, сгенерированный самой нейросетью. С ролью "user" рекомендуется включать реплики, написанные пользователем-собеседником. Более старые сообщения должны быть размещены в начале таблицы, более новые - в конце таблицы. Колонка "content" должна содержать само сообщение. Данное свойство можно оставить пустым, тогда генерация будет выполнена только по содержимому свойств "Роль" и "Запрос". Если используется свойство "Инструменты", то в таблице должно быть 4 колонки: "role", "content", "tool\_call\_id", "name" |
| --------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Запрос System         | \[Текст] Введите текст нового запроса к нейросети. Запрос будет выполняться с ролью system                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| Запрос User           | \[Текст] Введите текст нового запроса к нейросети. Запрос будет выполняться с ролью user                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| Модель                | Выберите модель для генерации ответа                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| Свое название модели  | \[Текст] Укажите свое название модели, которую поддерживает Sherpa AI Server                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| Стоп-слова            | \[Текст/Список] Строка или список, содержащий не более 4 строк, которые остановят дальнейшую генерацию. Возвращаемый текст не будет содержать эти слова                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Температура           | \[Число] Десятичное дробное число от 0 до 1, показывающее степень "случайности" или "креативности" результата, где 0 - наименее креативный результат, а 1 - максимально случайный. Для большинства творческих задач лучше подходит значение 0.7, а если вы хотите на один и тот же запрос каждый раз получать одинаковый ответ - установите значение 0.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Максимальная длина    | \[Число] Максимальная длина результата, выраженная в условных токенах. Для английского языка 1 токен - это 4 символа, для большинства других языков 1 токен - это 1 символ. Уменьшите это число, если хотите получать в среднем более короткие запросы, увеличьте для получения более длинных запросов. Учтите, что данное число ограничивает длину ответа, однако не обязательно полученный ответ будет указанной вами длины - в зависимости от содержимого запроса он может быть короче.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| Автоограничение длины | При включении указанная максимальная длина длина будет автоматически скорректирована. Для этого вычисляется количество токенов в запросе и учитывается максимально возможное количество токенов для выбранной модели                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| Таймаут               | \[Число] Максимальное время ожидания ответа в секундах. Реальное время ожидания зависит от выбранной модели, длины вашего запроса и прогнозируемой длины ответа, а также от текущей загруженности серверов. В случае превышения установленного предела ожидания возникает ошибка.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| Роль ответа           | \[Текст] Роль, с которой ответила нейросеть                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| Ответ                 | \[Текст] Текст ответа нейросети                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| Итоговая длина        | \[Число] Итоговая длина запроса и результата (объединенных вместе), выраженная в условных токенах                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| Уровень обработки     | Выбор уровня обработки ошибок. Возможные значения: "Default" - по умолчанию; "Ignore" - ошибки игнорируются; "Handle" - ошибки обрабатываются. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| Уровень сообщений     | Выбор уровня сообщений, которые будут выводить блоки при работе. Возможные значения: "Default" - по умолчанию; "Release" - вывод отключен; "Debug" - вывод основной информации; "Detailed" - вывод подробной информации. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| Текст ошибки          | \[Текст] Возвращает подробную информацию об ошибке в случае некорректного выполнения работы блока                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |

### Запрос к Claude

Этот блок позволяет отправлять запросы к генеративным моделям Claude. С его помощью вы можете создавать новые тексты по запросу, выполнять разнообразные задачи классификации, суммаризации, перевода и рерайтинга текстов, написание прототипов кода на разных языках программирования, парсить полуструктурированные и неструктурированные данные, извлекать и обрабатывать факты, поддерживать диалог на разнообразные темы, и многое другое. Оплата за использование данного функционала списывается с лицевого счета клиента на платформе. Для тестовых целей каждому новому пользователю даётся возможность протестировать данный функционал без оплаты. При использовании данного функционала после окончания разработки робота необходима оплата.

| История чата           | \[Таблица Данных] Добавьте историю чата, на основе контекста которого нейросеть должна сгенерировать ответ. Указанная таблица данных должна содержать колонки с именами "role" и "content". При отсутствии таких колонок в качестве "role" будет использована первая колонка таблицы, в качестве "content" - вторая колонка. В колонке "role" можно указать только одно из следующих значений: system, assistant и user. Роль system предназначена для настройки тональности и базовых установок нейросети, например с ролью "system" можно написать "You are helpful assistant on used cars selection. You know everything on how to choose the best deal for used car". С ролью "assistant" рекомендуется включать предыдущие сообщения, сгенерированный самой нейросетью. С ролью "user" рекомендуется включать реплики, написанные пользователем-собеседником. Более старые сообщения должны быть размещены в начале таблицы, более новые - в конце таблицы. Колонка "content" должна содержать само сообщение. Данное свойство можно оставить пустым, тогда генерация будет выполнена только по содержимому свойств "Роль" и "Запрос". Если используется свойство "Инструменты", то в таблице должно быть 4 колонки: "role", "content", "tool\_call\_id", "name"                                                                                                                                                                                                           |
| ---------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Запрос System          | \[Текст] Введите текст нового запроса к нейросети. Запрос будет выполняться с ролью system                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| Запрос User            | \[Текст] Введите текст нового запроса к нейросети. Запрос будет выполняться с ролью user                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| Модель                 | Выберите модель для генерации ответа                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| Стоп-слова             | \[Текст/Список] Строка или список, содержащий не более 4 строк, которые остановят дальнейшую генерацию. Возвращаемый текст не будет содержать эти слова                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| Температура            | \[Число] Десятичное дробное число от 0 до 1, показывающее степень "случайности" или "креативности" результата, где 0 - наименее креативный результат, а 1 - максимально случайный. Для большинства творческих задач лучше подходит значение 0.7, а если вы хотите на один и тот же запрос каждый раз получать одинаковый ответ - установите значение 0.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| Максимальная длина     | \[Число] Максимальная длина результата, выраженная в условных токенах. Для английского языка 1 токен - это 4 символа, для большинства других языков 1 токен - это 1 символ. Уменьшите это число, если хотите получать в среднем более короткие запросы, увеличьте для получения более длинных запросов. Учтите, что данное число ограничивает длину ответа, однако не обязательно полученный ответ будет указанной вами длины - в зависимости от содержимого запроса он может быть короче.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| Автоограничение длины  | При включении указанная максимальная длина длина будет автоматически скорректирована. Для этого вычисляется количество токенов в запросе и учитывается максимально возможное количество токенов для выбранной модели                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| Инструменты            | \[Таблица Данных] Таблица с описанием инструментов, которые может выбрать нейросеть для решения задачи вместо текстового ответа. Этот функционал поддерживают не все модели. Таблица данных должна содержать три колонки: "name" - название инструмента (латинские буквы и цифры, не более 64 символов), "description" - описание инструмента (может быть на отличных от английского языках), "parameters" - аргументы передаваемые в инструмент при его вызове в формате JSON. Пример JSON-описания параметров: "{\\"type\\": \\"object\\", \\"properties\\": { \\"query\\": { \\"type\\": \\"string\\", \\"description\\": \\"Request for a Google search result\\" }  }, \\"required\\": \[\\"query\\"] }". При вызове инструмента нейросеть выберет подходящий инструмент из числа доступных, опираясь на указанное вами описание инструментов, а также заполнит (сгенерирует) значения указанных вами параметров для вызова этих инструментов. Более подробно про механизм использования инструментов можно узнать из описания выходного свойства CalledTools.                                                                                                                                                                                                                                                                                                                                                                                                             |
| Таймаут                | \[Число] Максимальное время ожидания ответа в секундах. Реальное время ожидания зависит от выбранной модели, длины вашего запроса и прогнозируемой длины ответа, а также от текущей загруженности серверов. В случае превышения установленного предела ожидания возникает ошибка.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Роль ответа            | \[Текст] Роль, с которой ответила нейросеть                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| Ответ                  | \[Текст] Текст ответа нейросети                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| Итоговая длина         | \[Число] Итоговая длина запроса и результата (объединенных вместе), выраженная в условных токенах                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Вызываемые инструменты | \[Список] Список объектов ToolItem. Если нейросеть после запроса вместо текстового ответа предлагает использовать один или несколько инструментов, указанные в свойстве "Инструменты", то в данном свойстве будет возвращен список объектов ToolItem. Объект содержит следующие свойства: id, name, arguments. Значения id, name необходимо использовать в таблице "История чата". Свойство arguments является словарем, где ключ - это название параметра вызываемого инструмента, а значение является сгенерированным нейросетью значением этого параметра. При использовании механизма инструментов после вызова данного блока вы должны проверить, выбрала ли нейросеть какой-либо инструмент, по содержимому данного списка. Если список не пустой, вы должны самостоятельно реализовать функционал выбранного инструмента или инструментов в сценарии робота, а затем в следующем вызове данного блока вернуть нейросети результат выполнения инструмента, который нейросеть будет использовать в генерации последующих сообщений. Результат выполнения инструментов необходимо записывать в таблицу "История чата" следующим образом: в колонку "role" записывается константное значение "tool", в колонку "content" - значение результата выполнения инструмента (который вы реализовали в вашем сценарии и теперь сообщаете этот результат нейросети), в колонку "tool\_call\_id" - значение текущего ToolItem.id, в колонку "name" - значение текущего ToolItem.name. |
| Уровень обработки      | Выбор уровня обработки ошибок. Возможные значения: "Default" - по умолчанию; "Ignore" - ошибки игнорируются; "Handle" - ошибки обрабатываются. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| Уровень сообщений      | Выбор уровня сообщений, которые будут выводить блоки при работе. Возможные значения: "Default" - по умолчанию; "Release" - вывод отключен; "Debug" - вывод основной информации; "Detailed" - вывод подробной информации. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| Текст ошибки           | \[Текст] Возвращает подробную информацию об ошибке в случае некорректного выполнения работы блока                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |

### Запрос к GroqChat

Этот блок позволяет отправлять запросы к генеративным моделям GroqChat. С его помощью вы можете создавать новые тексты по запросу, выполнять разнообразные задачи классификации, суммаризации, перевода и рерайтинга текстов, написание прототипов кода на разных языках программирования, парсить полуструктурированные и неструктурированные данные, извлекать и обрабатывать факты, поддерживать диалог на разнообразные темы, и многое другое. Оплата за использование данного функционала списывается с лицевого счета клиента на платформе. Для тестовых целей каждому новому пользователю даётся возможность протестировать данный функционал без оплаты. При использовании данного функционала после окончания разработки робота необходима оплата.

| История чата           | \[Таблица Данных] Добавьте историю чата, на основе контекста которого нейросеть должна сгенерировать ответ. Указанная таблица данных должна содержать колонки с именами "role" и "content". При отсутствии таких колонок в качестве "role" будет использована первая колонка таблицы, в качестве "content" - вторая колонка. В колонке "role" можно указать только одно из следующих значений: system, assistant и user. Роль system предназначена для настройки тональности и базовых установок нейросети, например с ролью "system" можно написать "You are helpful assistant on used cars selection. You know everything on how to choose the best deal for used car". С ролью "assistant" рекомендуется включать предыдущие сообщения, сгенерированный самой нейросетью. С ролью "user" рекомендуется включать реплики, написанные пользователем-собеседником. Более старые сообщения должны быть размещены в начале таблицы, более новые - в конце таблицы. Колонка "content" должна содержать само сообщение. Данное свойство можно оставить пустым, тогда генерация будет выполнена только по содержимому свойств "Роль" и "Запрос". Если используется свойство "Инструменты", то в таблице должно быть 4 колонки: "role", "content", "tool\_call\_id", "name"                                                                                                                                                                                                           |
| ---------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Запрос System          | \[Текст] Введите текст нового запроса к нейросети. Запрос будет выполняться с ролью system                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| Запрос User            | \[Текст] Введите текст нового запроса к нейросети. Запрос будет выполняться с ролью user                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| Модель                 | Выберите модель для генерации ответа                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| Стоп-слова             | \[Текст/Список] Строка или список, содержащий не более 4 строк, которые остановят дальнейшую генерацию. Возвращаемый текст не будет содержать эти слова                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| Температура            | \[Число] Десятичное дробное число от 0 до 1, показывающее степень "случайности" или "креативности" результата, где 0 - наименее креативный результат, а 1 - максимально случайный. Для большинства творческих задач лучше подходит значение 0.7, а если вы хотите на один и тот же запрос каждый раз получать одинаковый ответ - установите значение 0.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| Максимальная длина     | \[Число] Максимальная длина результата, выраженная в условных токенах. Для английского языка 1 токен - это 4 символа, для большинства других языков 1 токен - это 1 символ. Уменьшите это число, если хотите получать в среднем более короткие запросы, увеличьте для получения более длинных запросов. Учтите, что данное число ограничивает длину ответа, однако не обязательно полученный ответ будет указанной вами длины - в зависимости от содержимого запроса он может быть короче.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| Автоограничение длины  | При включении указанная максимальная длина длина будет автоматически скорректирована. Для этого вычисляется количество токенов в запросе и учитывается максимально возможное количество токенов для выбранной модели                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| Инструменты            | \[Таблица Данных] Таблица с описанием инструментов, которые может выбрать нейросеть для решения задачи вместо текстового ответа. Этот функционал поддерживают не все модели. Таблица данных должна содержать три колонки: "name" - название инструмента (латинские буквы и цифры, не более 64 символов), "description" - описание инструмента (может быть на отличных от английского языках), "parameters" - аргументы передаваемые в инструмент при его вызове в формате JSON. Пример JSON-описания параметров: "{\\"type\\": \\"object\\", \\"properties\\": { \\"query\\": { \\"type\\": \\"string\\", \\"description\\": \\"Request for a Google search result\\" }  }, \\"required\\": \[\\"query\\"] }". При вызове инструмента нейросеть выберет подходящий инструмент из числа доступных, опираясь на указанное вами описание инструментов, а также заполнит (сгенерирует) значения указанных вами параметров для вызова этих инструментов. Более подробно про механизм использования инструментов можно узнать из описания выходного свойства CalledTools.                                                                                                                                                                                                                                                                                                                                                                                                             |
| Таймаут                | \[Число] Максимальное время ожидания ответа в секундах. Реальное время ожидания зависит от выбранной модели, длины вашего запроса и прогнозируемой длины ответа, а также от текущей загруженности серверов. В случае превышения установленного предела ожидания возникает ошибка.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Роль ответа            | \[Текст] Роль, с которой ответила нейросеть                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| Ответ                  | \[Текст] Текст ответа нейросети                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| Итоговая длина         | \[Число] Итоговая длина запроса и результата (объединенных вместе), выраженная в условных токенах                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| Вызываемые инструменты | \[Список] Список объектов ToolItem. Если нейросеть после запроса вместо текстового ответа предлагает использовать один или несколько инструментов, указанные в свойстве "Инструменты", то в данном свойстве будет возвращен список объектов ToolItem. Объект содержит следующие свойства: id, name, arguments. Значения id, name необходимо использовать в таблице "История чата". Свойство arguments является словарем, где ключ - это название параметра вызываемого инструмента, а значение является сгенерированным нейросетью значением этого параметра. При использовании механизма инструментов после вызова данного блока вы должны проверить, выбрала ли нейросеть какой-либо инструмент, по содержимому данного списка. Если список не пустой, вы должны самостоятельно реализовать функционал выбранного инструмента или инструментов в сценарии робота, а затем в следующем вызове данного блока вернуть нейросети результат выполнения инструмента, который нейросеть будет использовать в генерации последующих сообщений. Результат выполнения инструментов необходимо записывать в таблицу "История чата" следующим образом: в колонку "role" записывается константное значение "tool", в колонку "content" - значение результата выполнения инструмента (который вы реализовали в вашем сценарии и теперь сообщаете этот результат нейросети), в колонку "tool\_call\_id" - значение текущего ToolItem.id, в колонку "name" - значение текущего ToolItem.name. |
| Уровень обработки      | Выбор уровня обработки ошибок. Возможные значения: "Default" - по умолчанию; "Ignore" - ошибки игнорируются; "Handle" - ошибки обрабатываются. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| Уровень сообщений      | Выбор уровня сообщений, которые будут выводить блоки при работе. Возможные значения: "Default" - по умолчанию; "Release" - вывод отключен; "Debug" - вывод основной информации; "Detailed" - вывод подробной информации. Если выбрано значение "Default", то будет использоваться значение блока "Старт" данной диаграммы                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| Текст ошибки           | \[Текст] Возвращает подробную информацию об ошибке в случае некорректного выполнения работы блока                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
