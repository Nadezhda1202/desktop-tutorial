# Значения переменных

После создания шаблонов для каждого типа документа (их может быть несколько: 5, 10 и т.д.), можно пойти двумя путями:

1. Настроить работу сценария проекта с поочередным распознаванием по каждому шаблону, при этом добавлять в сценарий столько блоков, сколько было создано шаблонов.

![](https://sherparpa.ru/wp-content/uploads/2023/11/image1-567w303h.png)

2.  Запустить распознавание по списку шаблонов в одном блоке.

    Прежде чем использовать список, необходимо его задать в Переменных. Выбираем "Тип" переменной "List" (список), задаем имя переменной и редактируем значение переменной:&#x20;

    1. добавляем в список названия созданных нами шаблонов, по которым будет производиться распознавание. Например, "`ТОРГ12.json`", "`УПД.json`" и т.д.
    2. добавляем список с помощью знака `@` в формате `@("имя файла1","имя файла2")` , где `"имя файла1"` и `"имя файла2"` нужны для указания набора файлов, которые необходимо обработать. Например, "`@("ТОРГ12.json","УПД.json")`".

![](https://sherparpa.ru/wp-content/uploads/2023/11/image2-577w307h.png)

На Панели свойств указываем путь к файлу PDF. Файл может быть многостраничным. Также поддерживаются файлы формата `.png` и `.jpg`.

Далее указываем путь к файлу шаблона для распознавания. При указании списка файлов шаблонов будут последовательно использоваться каждый файл, пока распознавание не закончится успешно. Если ни один из шаблонов не подойдет для документа, то будет сгенерировано исключение с ошибкой первого шаблона из списка.

![](https://sherparpa.ru/wp-content/uploads/2023/11/image3-228w346h.png)

Указываем свойства:

* в строке "Путь к файлу\*" копируем путь к файлу в формате `.pdf`;
* в строке "Номер страницы" – `1`, тогда распознавание начнется с первой страницы документа;
* в строке "Путь к файлу шаблона\*" - созданную нами переменную со списком шаблонов.

При запуске роботы блока "Распознать по шаблону", первым распознается документ, указанный в списке Переменных. В случае возникновения ошибки по одному из шаблонов, Робот переходит к распознаванию следующего шаблона. При использовании списка возможно увеличение скорости обработки нескольких шаблонов, если параметры распознавания страницы у этих шаблонов одинаковые. Если параметры распознавания различны, то время распознавания документа увеличивается.

Например, если для одного из шаблонов указан OCR-модуль Tesseract, а для другого шаблона – YandexVision (или разный масштаб, или язык), то для каждого из этих шаблонов Робот будет заново распознавать документ, т.к. указаны разные параметры. Поэтому рекомендуем при создании шаблонов для типовых стандартизированных документов оставлять настройки, заданные по умолчанию и менять их только в случае необходимости.

В случае, если параметры настроек некоторых шаблонов были изменены, то рекомендуем компоновать их по группам: сначала указать несколько шаблонов с одним видом настроек, затем несколько шаблонов с другим типом настроек.

### **Индекс шаблона**

После распознавания документа в строке "Индекс шаблона" будет определен индекс шаблона.

![](https://sherparpa.ru/wp-content/uploads/2023/11/image4-185w196h.png)

Используя блок "Условие" необходимо задать траекторию дальнейшего сценария согласно полученным индексам. (Например, если индекс `0` – то это УПД, если индекс `1` – Счет-фактура и т.д.)

Если для распознавания использовался один документ, а не список, то индекс по умолчанию всегда будет `0` (нулевой).

### **Атрибуты**

![](https://sherparpa.ru/wp-content/uploads/2023/11/image5-251w214h.png)

После обработки шаблона необходимо продолжить работу с созданными Атрибутами.

Атрибуты отображаются в окне «Результаты полного сканирования» Шаблонизатора (Имя, Значение).

![](https://sherparpa.ru/wp-content/uploads/2023/11/image6-265w90h.png)

Чтобы получить значения Атрибутов, необходимо обратиться к словарю и присвоить значение переменной. Для этого следует использовать блок "Присвоить значение переменной"_._

На панели свойств выберите значение переменной, нажав на кнопку `…` и отредактировав выражение. В открывшемся окне нажмите на категорию $Attributes.&#x20;

<figure><img src="https://sherparpa.ru/wp-content/uploads/2023/11/image7-578w201h.png" alt=""><figcaption></figcaption></figure>

Укажите "Имя" Атрибута, которое ранее было задано в Шаблонизаторе, используя кавычки.

![](https://sherparpa.ru/wp-content/uploads/2023/11/image8-587w122h.png)

Далее необходимо задать имя переменной, с которой будет продолжаться дальнейшая работа. Имя переменной может быть задано произвольно, например, $AttributesZakaz или $MyOrganization.

![](https://sherparpa.ru/wp-content/uploads/2023/11/image9-272w208h.png)

### **Таблица**

Присваивая значение переменной для таблицы (если таблиц несколько, — то массива таблиц), необходимо использовать индекс таблицы, который был присвоен в Шаблонизаторе автоматически (по порядку). Вручную присвоить значение переменной невозможно.

![](https://sherparpa.ru/wp-content/uploads/2023/11/image10-260w172h.png)

На панели "Свойства" выберите значение переменной и нажмите на `…`, после чего отредактируйте выражение. В открывшемся окне нажмите на категорию $Tables. Добавьте столько таблиц, сколько было добавлено в Шаблонизаторе и укажите индекс для каждой таблицы.

![](https://sherparpa.ru/wp-content/uploads/2023/11/image11-542w198h.png)

Далее необходимо задать имя переменной, с которой будет продолжаться работа. Имя переменной может быть задано произвольно, например, $TablesProducts или $MyTables.

![](https://sherparpa.ru/wp-content/uploads/2023/11/image12-1.png)

После того как "Имя" и "Значение" переменных были заданы, можно приступать к дальнейшей работе.
