# Значения переменных

После создания шаблонов для каждого типа документа (их может быть несколько 5, 10 и т.д.), можно пойти двумя путями:

1. Настроить работу сценария проекта с поочередным распознаванием по каждому шаблону, при этом добавлять в сценарий столько блоков, сколько было создано шаблонов

![](https://sherparpa.ru/wp-content/uploads/2023/11/image1-567w303h.png)

2. Запустить распознавание по списку шаблонов в одном блоке.

Прежде чем использовать список, необходимо его задать в Переменных. Выбираем Тип переменной List (список), задаем имя переменной и редактируем значение переменной: добавляем в список названия созданных нами шаблонов, по которым будет производиться распознавание. Например, ТОРГ12.json, УПД.json и т.д.

![](https://sherparpa.ru/wp-content/uploads/2023/11/image2-577w307h.png)

На _Панели свойств_ указываем путь к файлу PDF. Файл может быть многостраничным. Также поддерживаются файлы формата .png и .jpg.

Далее указываем путь к файлу шаблона для распознавания. При указании списка файлов шаблонов будут последовательно использоваться каждый файл, пока распознавание не закончится успешно. Если ни один из шаблонов не подойдет для документа, то будет сгенерировано исключение с ошибкой первого шаблона из списка.

![](https://sherparpa.ru/wp-content/uploads/2023/11/image3-228w346h.png)

Указываем путь к файлу в формате .pdf

В строке Путь к файлу шаблона указанную созданную нами переменную со списком шаблонов.

Номер страницы – 1, тогда распознавание начнется с первой страницы документа.

При запуске роботы блока _Распознать_ _по шаблону_, первым распознается документ, указанный в списке Переменной. В случае возникновения ошибки по одному из шаблонов, робот переходит к распознаванию следующего шаблона.

При использовании списка возможно увеличение скорости обработки нескольких шаблонов, если параметры распознавания страницы у этих шаблонов одинаковые.

Если параметры распознавания различны, то время распознавания документа увеличивается.

Например, если для одного из шаблонов указан OCR-модуль Tesseract, а для другого шаблона – YandexVision (или разный масштаб или язык), то для каждого из этих шаблонов робот будет заново распознавать документ, т.к. указаны разные параметры.

Поэтому рекомендуем при создании шаблонов для типовых стандартизированных документов оставлять настройки, заданные по умолчанию и менять их только в случае необходимости.

В случае, если параметры настроек некоторых шаблонов были изменены, то рекомендуем компоновать их по группам: сначала указать несколько шаблонов с одним видом настроек, затем несколько шаблонов с другим типом настроек.

**Индекс шаблона**

После распознавания документа будет определен индекс шаблона.

![](https://sherparpa.ru/wp-content/uploads/2023/11/image4-185w196h.png)

Используя блок _Условие_ мы задаем траекторию дальнейшего сценария согласно полученным индексам. (например, если индекс 0 – то это УПД, если индекс 1 – Счет-фактура и т.д.)

Если для распознавания использовался один документ, а не список, то индекс по умолчанию всегда будет 0 (нулевой).

**Атрибуты**

![](https://sherparpa.ru/wp-content/uploads/2023/11/image5-251w214h.png)

После обработки шаблона необходимо продолжить работу с созданными атрибутами.

Атрибуты отображаются в окне «Результаты полного сканирования» Шаблонизатора (_Имя, Значение_).

![](https://sherparpa.ru/wp-content/uploads/2023/11/image6-265w90h.png)

Чтобы получить значения атрибутов мы должны обратиться к словарю и присвоить значение переменной. Используем блок _Присвоить значение переменной._

На панели свойств выбираем значение переменной, кликаем на «_…»_ и редактируем выражение. В открывшемся окне выбираем категорию _$Attributes_.&#x20;

<figure><img src="https://sherparpa.ru/wp-content/uploads/2023/11/image7-578w201h.png" alt=""><figcaption></figcaption></figure>

Указываем Имя атрибута, которое ранее было задано в Шаблонизаторе, используя кавычки.

![](https://sherparpa.ru/wp-content/uploads/2023/11/image8-587w122h.png)

Далее необходимо задать имя переменной, с которой мы продолжим работать. Имя переменной может быть задано произвольно, например, $AttributesZakaz или $MyOrganization.

![](https://sherparpa.ru/wp-content/uploads/2023/11/image9-272w208h.png)

**Таблица**

Присваивая значение переменной для таблицы (если таблиц несколько, — то массив таблиц), необходимо использовать индекс таблицы, который был присвоен в Шаблонизаторе автоматически (по порядку). Вручную присвоить значение переменной невозможно.

![](https://sherparpa.ru/wp-content/uploads/2023/11/image10-260w172h.png)

На панели свойств выбираем значение переменной, кликаем на «…» и редактируем выражение. В открывшемся окне выбираем категорию _$Tables_. Добавляем столько таблиц, сколько было добавлено в Шаблонизаторе и указываем индекс каждой таблицы.

![](https://sherparpa.ru/wp-content/uploads/2023/11/image11-542w198h.png)

Далее необходимо задать имя переменной, с которой мы продолжим работать. Имя переменной может быть задано произвольно, например, $TablesProducts или $MyTables.

![](https://sherparpa.ru/wp-content/uploads/2023/11/image12-1.png)

После того, как Имя и Значение переменных были заданы, можно приступать к дальнейшей работе.
